<div class="row mb-1">
    <div class="form-group mb-1 col-md-3">
        <label>Mã vị trí</label>
        <input type="text" class="form-control" [(ngModel)]="locationid" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Tên vị trí</label>
        <input type="text" class="form-control" [(ngModel)]="locationname" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Dự án</label>
        <ng-select [searchable]="false" [(ngModel)]="projectid" [ngModelOptions]="{standalone: true}">
            <ng-container *ngFor="let i of dataProjects">
                <ng-option [value]="i.projectid">{{i.projectid + " - " + i.projectname}}</ng-option>
            </ng-container>
        </ng-select>
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Tình trạng</label>
        <ng-select [searchable]="false" [(ngModel)]="locationstatus" [ngModelOptions]="{standalone: true}">
            <ng-container *ngFor="let i of lstLocationStatus">
                <ng-option [value]="i.value">{{i.text}}</ng-option>
            </ng-container>
        </ng-select>
    </div>
</div>
<div class="row mb-1">
    <div class="form-group mb-1 col-md-9">
        <label>Vị trí cụ thể</label>
        <input type="text" class="form-control" [(ngModel)]="address" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Trạng thái vị trí</label>
        <ng-select [searchable]="false" [(ngModel)]="record_stat" [ngModelOptions]="{standalone: true}">
            <ng-container *ngFor="let i of lstRecordStat">
                <ng-option [value]="i.value">{{i.text}}</ng-option>
            </ng-container>
        </ng-select>
    </div>
</div>
<div class="row mb-1">
    <div class="form-group mb-1 col-md-3">
        <label>Mã cây</label>
        <input type="text" class="form-control" [(ngModel)]="treecode" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Tên cây</label>
        <input type="text" class="form-control" [(ngModel)]="treename" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Loại cây</label>
        <input type="text" class="form-control" [(ngModel)]="treetype" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Tình trạng cây</label>
        <ng-select [searchable]="false" [(ngModel)]="treestatus" [ngModelOptions]="{standalone: true}">
            <ng-container *ngFor="let i of lstTreeStatus">
                <ng-option [value]="i.value">{{i.text}}</ng-option>
            </ng-container>
        </ng-select>
    </div>
</div>
<div class="row mb-1">
    <div class="form-group mb-1 col-md-3">
        <label>Từ ngày tạo</label>
        <input type="date" class="form-control" [(ngModel)]="fromCreatedDate" />
    </div>
    <div class="form-group mb-1 col-md-3">
        <label>Đến ngày tạo</label>
        <input type="date" class="form-control" [(ngModel)]="toCreatedDate" />
    </div>
</div>
<div class="col-md-3 mb-2">
    <button class="btn btn-primary" type="button" (click)="loadData()">Tìm kiếm</button>
    <button class="btn btn-primary" type="button" (click)="openModal(modal)">Tạo mới</button>
</div>
<div class="row">
    <div class="col-md-12">
        <!-- <app-card cardTitle="Danh sách tài khoản" [options]="false"> -->
        <ngx-datatable class='bootstrap no-detail-row' [columnMode]="ColumnMode.force" [footerHeight]="50"
            [rowHeight]="'auto'" [rows]='rows' [count]="totalCount" [limit]="pagesize">
            <ngx-datatable-column [sortable]="false" name="Mã vị trí" prop="locationid" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.locationid">
                        {{row.locationid}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Tên vị trí" prop="locationname" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.locationname">
                        {{row.locationname}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Vị trí cụ thể" prop="address" [width]="200">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.address">
                        {{row.address}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Dự án" prop="projectname" [width]="150">
                <ng-template let-row="row" let-expanded="projectname" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.projectname">
                        {{row.projectname}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Tình trạng" prop="locationstatus" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.locationstatus">
                        {{row.locationstatus}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Trạng thái vị trí" prop="record_stat"
                [width]="100"></ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Mã cây trồng" prop="treecode" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.treecode">
                        {{row.treecode}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Tên cây trồng" prop="treename" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.treename">
                        {{row.treename}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Loại cây" prop="treetype" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.treetype">
                        {{row.treetype}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" name="Trạng thái cây" prop="treestatus" [width]="100">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <span class="text-datatable" [title]="row.treestatus">
                        {{row.treestatus}}
                    </span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column [sortable]="false" [width]="60">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    <div class="text-center">
                        <a class="mr-2" style="margin-right: 10px;" (click)="loadDataDetail(row, modal)"
                            href="javascript:void(0);">
                            <i class="far fa-edit"></i>
                        </a>
                        <a class="mr-2" style="margin-right: 10px;" (click)="loadDataHist(row, modalHist)" href="javascript:void(0);">
                            <i class="fas fa-history"></i>
                        </a>
                        <a class="mr-2" style="margin-right: 10px;" (click)="deleteData(row)" href="javascript:void(0);">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </div>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
        <!-- </app-card> -->
    </div>
</div>
<ng-template #modal let-modal>
    <app-create-location [locationId]="locationIdDetail" [type]="'DETAIT'" [modal]="modal"
        (parrentEvent)="loadData()"></app-create-location>
</ng-template>
<ng-template #modalHist let-modal>
    <app-hist-location [locationId]="locationIdHist" [modal]="modal"></app-hist-location>
</ng-template>